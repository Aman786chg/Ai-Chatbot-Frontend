<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FAQ Chatbot</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f4f4;
}

/* Chat Widget */
.chat-widget {
    width: 360px;
    position: fixed;

    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    
    background: white;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    overflow: hidden;
}

/* Header */
.chat-header {
    background: #9b59b6;
    color: white;
    padding: 15px;
    display: flex;
    align-items: center;
}

.chat-header img {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    margin-right: 10px;
}

.chat-header .status {
    font-size: 12px;
    color: #dfffd6;
}

/* Chat Area */
.chat-body {
    height: 300px;
    padding: 15px;
    overflow-y: auto;
    background: #f9f9f9;
}

/* Messages */
.message {
    margin-bottom: 10px;
    max-width: 80%;
    padding: 10px 14px;
    border-radius: 18px;
    font-size: 14px;
    line-height: 1.4;
}

.bot {
    background: #e6e6e6;
    color: #000;
    align-self: flex-start;
}

.user {
    background: #9b59b6;
    color: white;
    margin-left: auto;
    text-align: left;
}

/* Footer */
.chat-footer {
    display: flex;
    border-top: 1px solid #ddd;
}

.chat-footer input {
    flex: 1;
    border: none;
    padding: 12px;
    font-size: 14px;
    outline: none;
}

.chat-footer button {
    background: #9b59b6;
    border: none;
    color: white;
    padding: 0 20px;
    cursor: pointer;
}
</style>
</head>

<body>

<div class="chat-widget">

    <!-- Header -->
    <div class="chat-header">
        <img src="https://cdn-icons-png.flaticon.com/512/4712/4712035.png">
        <div>
            <b>FAQ SHUTTERLAB</b><br>
            <span class="status">‚óè Online now</span>
        </div>
    </div>

    <!-- Chat messages -->
    <div class="chat-body" id="chatbox">
    </div>

    <!-- Input -->
    <div class="chat-footer">
        <input id="question" placeholder="Type your message..." />
        <button onclick="ask()">Send</button>
    </div>

</div>

<script>
async function ask() {
    const input = document.getElementById("question");
    const chatbox = document.getElementById("chatbox");
    const question = input.value.trim();

    if (!question) return;

    // User message
    const userMsg = document.createElement("div");
    userMsg.className = "message user";
    userMsg.innerText = question;
    chatbox.appendChild(userMsg);

    input.value = "";
    chatbox.scrollTop = chatbox.scrollHeight;

    // API call
    const response = await fetch("http://127.0.0.1:8000/ask", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ query: question })
    });

    const data = await response.json();

    // Bot message
    const botMsg = document.createElement("div");
    botMsg.className = "message bot";
    botMsg.innerText = data.answer;
    chatbox.appendChild(botMsg);

    chatbox.scrollTop = chatbox.scrollHeight;
}
</script>

</body>
</html>